<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–æ—Ä–æ–±–µ–π - –ö–æ—É—á–∏–Ω–≥–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</title>
    
    <!-- PWA Meta —Ç–µ–≥–∏ -->
    <meta name="theme-color" content="#2563eb">
    <meta name="description" content="–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∫–æ—É—á–∏–Ω–≥–∞ –∏ –ª–∏—á–Ω–æ—Å—Ç–Ω–æ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –ö–æ–ª–µ—Å–æ –±–∞–ª–∞–Ω—Å–∞">
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogItCS0L7RgNC+0LHQtdC5IC0g0JrQvtGD0YfQuNC90LPQvtCy0L7QtSDQv9GA0LjQu9C+0LbQtdC90LjQtSIsCiAgInNob3J0X25hbWUiOiAi0JLQvtGA0L7QsdC10LkiLAogICJzdGFydF91cmwiOiAiLyIsCiAgImRpc3BsYXkiOiAic3RhbmRhbG9uZSIsCiAgImJhY2tncm91bmRfY29sb3IiOiAiI2ZmZmZmZiIsCiAgInRoZW1lX2NvbG9yIjogIiMyNTYzZWIiLAogICJpY29ucyI6IFsKICAgIHsKICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIzYVdSMGFEMGlNVEU0SWlCb1pXbG5hSFE5SWpFeE9DSWdkbWxsZDBKdmVEMGlNQ0F3SURFNU1pQXhPVElpSUdacGJHdzlJaU5tWmpGaU16VWlQZzA4Y21WamRDQjNhV1IwYUQwaU1qZ2lJR2hsYVdkb2REMGlNamhpSWlCeWVEMGlOU0lnWm1sc2JEMGlJek15WkdaaVppSXZQZzBrUENoeVpXTjBJSGRwWkhSb1BTSXlOQ0lnYUdWcFoyaDBQU0l5TkNJZ2NuZzlJall1TlNJZ1ptbHNiRDBpSXpZNE5EWmlZU0l2UGcwOEwyNTJaejQ9IiwKICAgICAgInNpemVzIjogIjE5MngxOTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9zdmcreG1sIgogICAgfQogIF0KfQ==">
    
    <!-- –ò–∫–æ–Ω–∫–∏ –¥–ª—è PWA -->
    <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTE4IiBoZWlnaHQ9IjExOCIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9IiNmZjFiMzUiPg0KPHJlY3Qgd2lkdGg9IjI4IiBoZWlnaHQ9IjI4YiIgcng9IjUiIGZpbGw9IiMzMmRmYmYiLz4NCjxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgcng9IjYuNSIgZmlsbD0iIzY4NDJiYSIvPg0KPC9zdmc+">
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTE4IiBoZWlnaHQ9IjExOCIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9IiNmZjFiMzUiPg0KPHJlY3Qgd2lkdGg9IjI4IiBoZWlnaHQ9IjI4YiIgcng9IjUiIGZpbGw9IiMzMmRmYmYiLz4NCjxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgcng9IjYuNSIgZmlsbD0iIzY4NDJiYSIvPg0KPC9zdmc+">
    
    <!-- React –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ -->
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background: #f9fafb;
        }
        
        /* PWA —Å—Ç–∏–ª–∏ */
        .install-prompt {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: #2563eb;
            color: white;
            padding: 16px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            display: none;
            z-index: 1000;
        }
        
        /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
        @media (max-width: 768px) {
            .desktop-only { display: none !important; }
            .mobile-padding { padding: 1rem !important; }
            .mobile-text { font-size: 0.875rem !important; }
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-out;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ–ª–µ—Å–∞ */
        .wheel-container {
            touch-action: manipulation;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∑–∞–¥–∞—á */
        .task-card {
            transform: translateX(0);
            transition: transform 0.3s ease;
        }
        
        .task-card:hover {
            transform: translateX(4px);
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <!-- –ü—Ä–æ–º–ø—Ç –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ PWA -->
    <div id="install-prompt" class="install-prompt">
        <div class="flex items-center justify-between">
            <div>
                <p class="font-semibold">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</p>
                <p class="text-sm opacity-90">–î–æ–±–∞–≤—å—Ç–µ –í–æ—Ä–æ–±–µ–π –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω</p>
            </div>
            <div class="flex space-x-2">
                <button id="install-btn" class="bg-white text-blue-600 px-4 py-2 rounded-lg font-medium">
                    –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
                </button>
                <button id="dismiss-btn" class="text-white opacity-70 px-2 py-2">
                    ‚úï
                </button>
            </div>
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { createRoot } = ReactDOM;

        // API –∫–ª–∏–µ–Ω—Ç (–±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ª–æ–∫–∞–ª—å–Ω—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º)
        class ApiClient {
            constructor() {
                this.baseKey = 'vorobey_app_';
                this.initializeData();
            }

            initializeData() {
                if (!this.getItem('initialized')) {
                    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                    const defaultLifeAreas = [
                        { id: 1, name: '–ó–¥–æ—Ä–æ–≤—å–µ', current: 6, target: 10, color: '#22c55e' },
                        { id: 2, name: '–ë–∏–∑–Ω–µ—Å/–ö–∞—Ä—å–µ—Ä–∞', current: 7, target: 10, color: '#3b82f6' },
                        { id: 3, name: '–î—É—Ö–æ–≤–Ω–∞—è —Å—Ñ–µ—Ä–∞', current: 5, target: 10, color: '#8b5cf6' },
                        { id: 4, name: '–õ–∏—á–Ω–æ—Å—Ç–Ω—ã–π —Ä–æ—Å—Ç', current: 8, target: 10, color: '#f59e0b' },
                        { id: 5, name: '–û—Ç–Ω–æ—à–µ–Ω–∏—è', current: 6, target: 10, color: '#ef4444' },
                        { id: 6, name: '–§–∏–Ω–∞–Ω—Å—ã', current: 5, target: 10, color: '#10b981' },
                        { id: 7, name: '–î–æ—Å—É–≥/–•–æ–±–±–∏', current: 7, target: 10, color: '#f97316' },
                        { id: 8, name: '–°–µ–º—å—è', current: 8, target: 10, color: '#ec4899' }
                    ];

                    const defaultTasks = [
                        {
                            id: 1,
                            areaId: 1,
                            title: '–ü—Ä–æ–±–µ–∂–∫–∞ 3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é',
                            description: '–ë–µ–≥–∞—Ç—å –ø–æ 30 –º–∏–Ω—É—Ç –≤ –ø–∞—Ä–∫–µ',
                            result: '–£–ª—É—á—à–µ–Ω–∏–µ –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç–∏ –∏ –æ–±—â–µ–≥–æ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—è',
                            reward: '–ü–æ–∫—É–ø–∫–∞ –Ω–æ–≤—ã—Ö –∫—Ä–æ—Å—Å–æ–≤–æ–∫',
                            penalty: '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≤ –≤—ã—Ö–æ–¥–Ω—ã–µ',
                            status: 'in-progress',
                            plannedDate: new Date().toISOString().split('T')[0],
                            comments: [],
                            files: [],
                            createdAt: new Date().toISOString()
                        },
                        {
                            id: 2,
                            areaId: 2,
                            title: '–ó–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–µ–∫—Ç X',
                            description: '–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é –∏ –ø—Ä–æ–≤–µ—Å—Ç–∏ –¥–µ–º–æ',
                            result: '–£—Å–ø–µ—à–Ω–∞—è —Å–¥–∞—á–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∫–ª–∏–µ–Ω—Ç—É',
                            reward: '–ü—Ä–µ–º–∏—è 50000 —Ä—É–±–ª–µ–π',
                            penalty: '–†–∞–±–æ—Ç–∞ –≤ –≤—ã—Ö–æ–¥–Ω—ã–µ',
                            status: 'todo',
                            plannedDate: new Date(Date.now() + 86400000 * 3).toISOString().split('T')[0],
                            comments: [],
                            files: [],
                            createdAt: new Date().toISOString()
                        }
                    ];

                    const defaultUsers = [
                        { id: 1, name: '–ê–Ω–Ω–∞ –ö–æ—É—á', email: 'coach@demo.ru', role: 'coach', password: 'demo123' },
                        { id: 2, name: '–ò–≤–∞–Ω –ö–ª–∏–µ–Ω—Ç', email: 'client@demo.ru', role: 'client', password: 'demo123' }
                    ];

                    this.setItem('life_areas', defaultLifeAreas);
                    this.setItem('tasks', defaultTasks);
                    this.setItem('users', defaultUsers);
                    this.setItem('initialized', true);
                }
            }

            getItem(key) {
                try {
                    const item = localStorage.getItem(this.baseKey + key);
                    return item ? JSON.parse(item) : null;
                } catch (e) {
                    console.error('Error getting item:', e);
                    return null;
                }
            }

            setItem(key, value) {
                try {
                    localStorage.setItem(this.baseKey + key, JSON.stringify(value));
                    return true;
                } catch (e) {
                    console.error('Error setting item:', e);
                    return false;
                }
            }

            // API –º–µ—Ç–æ–¥—ã
            async getLifeAreas() {
                return this.getItem('life_areas') || [];
            }

            async updateLifeArea(areaId, updates) {
                const areas = await this.getLifeAreas();
                const updatedAreas = areas.map(area => 
                    area.id === areaId ? { ...area, ...updates } : area
                );
                this.setItem('life_areas', updatedAreas);
                return updatedAreas.find(area => area.id === areaId);
            }

            async getTasks() {
                return this.getItem('tasks') || [];
            }

            async createTask(taskData) {
                const tasks = await this.getTasks();
                const newTask = {
                    id: Date.now(),
                    ...taskData,
                    status: 'todo',
                    comments: [],
                    files: [],
                    createdAt: new Date().toISOString()
                };
                tasks.push(newTask);
                this.setItem('tasks', tasks);
                return newTask;
            }

            async updateTask(taskId, updates) {
                const tasks = await this.getTasks();
                const updatedTasks = tasks.map(task => 
                    task.id === taskId ? { ...task, ...updates } : task
                );
                this.setItem('tasks', updatedTasks);
                return updatedTasks.find(task => task.id === taskId);
            }

            async deleteTask(taskId) {
                const tasks = await this.getTasks();
                const filteredTasks = tasks.filter(task => task.id !== taskId);
                this.setItem('tasks', filteredTasks);
                return true;
            }

            async login(email, password) {
                const users = this.getItem('users') || [];
                const user = users.find(u => u.email === email && u.password === password);
                if (user) {
                    this.setItem('current_user', user);
                    return { success: true, user: { ...user, password: undefined } };
                }
                return { success: false, error: '–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å' };
            }

            async getCurrentUser() {
                return this.getItem('current_user');
            }

            async logout() {
                localStorage.removeItem(this.baseKey + 'current_user');
                return true;
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è API –∫–ª–∏–µ–Ω—Ç–∞
        const api = new ApiClient();

        const CoachingApp = () => {
            const [currentUser, setCurrentUser] = useState(null);
            const [currentView, setCurrentView] = useState('login');
            const [lifeAreas, setLifeAreas] = useState([]);
            const [tasks, setTasks] = useState([]);
            const [selectedArea, setSelectedArea] = useState(null);
            const [showNewTaskForm, setShowNewTaskForm] = useState(false);
            const [showAreaDetail, setShowAreaDetail] = useState(false);
            const [loading, setLoading] = useState(false);
            const [notification, setNotification] = useState(null);
            const [newTask, setNewTask] = useState({
                title: '',
                description: '',
                result: '',
                reward: '',
                penalty: '',
                areaId: 1,
                plannedDate: ''
            });
            const [loginData, setLoginData] = useState({ email: '', password: '', role: 'client' });

            // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
            useEffect(() => {
                loadData();
            }, []);

            const loadData = async () => {
                setLoading(true);
                try {
                    const user = await api.getCurrentUser();
                    if (user) {
                        setCurrentUser(user);
                        setCurrentView('dashboard');
                    }
                    
                    const [areasData, tasksData] = await Promise.all([
                        api.getLifeAreas(),
                        api.getTasks()
                    ]);
                    
                    setLifeAreas(areasData);
                    setTasks(tasksData);
                } catch (error) {
                    showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö', 'error');
                } finally {
                    setLoading(false);
                }
            };

            const showNotification = (message, type = 'success') => {
                setNotification({ message, type });
                setTimeout(() => setNotification(null), 3000);
            };

            const handleLogin = async () => {
                if (!loginData.email || !loginData.password) {
                    showNotification('–í–≤–µ–¥–∏—Ç–µ email –∏ –ø–∞—Ä–æ–ª—å', 'error');
                    return;
                }
                
                setLoading(true);
                try {
                    const result = await api.login(loginData.email, loginData.password);
                    if (result.success) {
                        setCurrentUser(result.user);
                        setCurrentView('dashboard');
                        showNotification(`–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${result.user.name}!`);
                    } else {
                        showNotification(result.error, 'error');
                    }
                } catch (error) {
                    showNotification('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞', 'error');
                } finally {
                    setLoading(false);
                }
            };

            const handleLogout = async () => {
                await api.logout();
                setCurrentUser(null);
                setCurrentView('login');
                showNotification('–í—ã –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã');
            };

            const updateAreaScore = async (areaId, newScore) => {
                try {
                    await api.updateLifeArea(areaId, { current: newScore });
                    setLifeAreas(prev => prev.map(area =>
                        area.id === areaId ? { ...area, current: newScore } : area
                    ));
                    showNotification('–û—Ü–µ–Ω–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞');
                } catch (error) {
                    showNotification('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ü–µ–Ω–∫–∏', 'error');
                }
            };

            const toggleTaskStatus = async (taskId) => {
                try {
                    const task = tasks.find(t => t.id === taskId);
                    const newStatus = task.status === 'completed' ? 'todo' : 'completed';
                    
                    await api.updateTask(taskId, { status: newStatus });
                    setTasks(prev => prev.map(task => 
                        task.id === taskId ? { ...task, status: newStatus } : task
                    ));
                    
                    showNotification(newStatus === 'completed' ? '–ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!' : '–ó–∞–¥–∞—á–∞ —Å–Ω–æ–≤–∞ –∞–∫—Ç–∏–≤–Ω–∞');
                } catch (error) {
                    showNotification('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏', 'error');
                }
            };

            const createTask = async () => {
                if (!newTask.title || !newTask.plannedDate) {
                    showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –¥–∞—Ç—É', 'error');
                    return;
                }
                
                try {
                    const task = await api.createTask(newTask);
                    setTasks(prev => [...prev, task]);
                    setNewTask({
                        title: '',
                        description: '',
                        result: '',
                        reward: '',
                        penalty: '',
                        areaId: 1,
                        plannedDate: ''
                    });
                    setShowNewTaskForm(false);
                    showNotification('–ó–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–Ω–∞!');
                } catch (error) {
                    showNotification('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏', 'error');
                }
            };

            // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            const NotificationComponent = () => {
                if (!notification) return null;
                
                return (
                    <div className={`fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 fade-in ${
                        notification.type === 'error' 
                            ? 'bg-red-500 text-white' 
                            : 'bg-green-500 text-white'
                    }`}>
                        {notification.message}
                    </div>
                );
            };

            // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–≥—Ä—É–∑–∫–∏
            const LoadingSpinner = () => (
                <div className="flex items-center justify-center p-4">
                    <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
                </div>
            );

            // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
            const LoginForm = () => (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4">
                    <div className="bg-white rounded-2xl shadow-xl p-8 w-full max-w-md fade-in">
                        <div className="text-center mb-8">
                            <h1 className="text-3xl font-bold text-gray-800 mb-2">üê¶ –í–æ—Ä–æ–±–µ–π</h1>
                            <p className="text-gray-600">–ö–æ—É—á–∏–Ω–≥–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è</p>
                        </div>
                        
                        <div className="space-y-6">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                <input
                                    type="email"
                                    value={loginData.email}
                                    onChange={(e) => setLoginData({...loginData, email: e.target.value})}
                                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    placeholder="your@email.ru"
                                />
                            </div>
                            
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">–ü–∞—Ä–æ–ª—å</label>
                                <input
                                    type="password"
                                    value={loginData.password}
                                    onChange={(e) => setLoginData({...loginData, password: e.target.value})}
                                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                                />
                            </div>
                            
                            <button
                                onClick={handleLogin}
                                disabled={loading}
                                className="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50"
                            >
                                {loading ? <LoadingSpinner /> : '–í–æ–π—Ç–∏'}
                            </button>
                        </div>
                        
                        <div className="mt-6 text-center text-sm text-gray-500">
                            <p className="mb-2">–î–µ–º–æ –∞–∫–∫–∞—É–Ω—Ç—ã:</p>
                            <div className="space-y-1">
                                <button 
                                    onClick={() => setLoginData({email: 'coach@demo.ru', password: 'demo123'})}
                                    className="block w-full text-blue-600 hover:text-blue-700"
                                >
                                    –ö–æ—É—á: coach@demo.ru / demo123
                                </button>
                                <button 
                                    onClick={() => setLoginData({email: 'client@demo.ru', password: 'demo123'})}
                                    className="block w-full text-blue-600 hover:text-blue-700"
                                >
                                    –ö–ª–∏–µ–Ω—Ç: client@demo.ru / demo123
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );

            // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–æ–ª–µ—Å–∞ –±–∞–ª–∞–Ω—Å–∞
            const LifeWheel = () => {
                const centerX = 150;
                const centerY = 150;
                const radius = 110;
                const segments = lifeAreas.length;
                const angleStep = (2 * Math.PI) / segments;

                return (
                    <div className="bg-white p-4 md:p-6 rounded-xl shadow-lg wheel-container">
                        <h3 className="text-xl font-semibold mb-4 text-center">–ö–æ–ª–µ—Å–æ –±–∞–ª–∞–Ω—Å–∞</h3>
                        <div className="flex justify-center">
                            <svg width="300" height="300" className="drop-shadow-sm max-w-full">
                                {/* –ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—á–µ—Å–∫–∏–µ –∫—Ä—É–≥–∏ */}
                                {[2, 4, 6, 8, 10].map(level => (
                                    <circle
                                        key={level}
                                        cx={centerX}
                                        cy={centerY}
                                        r={(radius * level) / 10}
                                        fill="none"
                                        stroke="#e5e7eb"
                                        strokeWidth="1"
                                    />
                                ))}
                                
                                {/* –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏ */}
                                {lifeAreas.map((_, index) => {
                                    const angle = index * angleStep - Math.PI / 2;
                                    const x2 = centerX + radius * Math.cos(angle);
                                    const y2 = centerY + radius * Math.sin(angle);
                                    return (
                                        <line
                                            key={index}
                                            x1={centerX}
                                            y1={centerY}
                                            x2={x2}
                                            y2={y2}
                                            stroke="#e5e7eb"
                                            strokeWidth="1"
                                        />
                                    );
                                })}
                                
                                {/* –û–±–ª–∞—Å—Ç–∏ */}
                                {lifeAreas.map((area, index) => {
                                    const angle1 = index * angleStep - Math.PI / 2;
                                    const angle2 = (index + 1) * angleStep - Math.PI / 2;
                                    const currentRadius = (radius * area.current) / 10;
                                    
                                    const x1 = centerX + currentRadius * Math.cos(angle1);
                                    const y1 = centerY + currentRadius * Math.sin(angle1);
                                    const x2 = centerX + currentRadius * Math.cos(angle2);
                                    const y2 = centerY + currentRadius * Math.sin(angle2);
                                    
                                    const largeArcFlag = angleStep > Math.PI ? 1 : 0;
                                    
                                    const pathData = [
                                        `M ${centerX} ${centerY}`,
                                        `L ${x1} ${y1}`,
                                        `A ${currentRadius} ${currentRadius} 0 ${largeArcFlag} 1 ${x2} ${y2}`,
                                        'Z'
                                    ].join(' ');
                                    
                                    return (
                                        <path
                                            key={area.id}
                                            d={pathData}
                                            fill={area.color}
                                            fillOpacity="0.6"
                                            stroke={area.color}
                                            strokeWidth="2"
                                            className="hover:fill-opacity-80 cursor-pointer transition-all"
                                            onClick={() => {
                                                setSelectedArea(area);
                                                setShowAreaDetail(true);
                                            }}
                                        />
                                    );
                                })}
                                
                                {/* –ü–æ–¥–ø–∏—Å–∏ */}
                                {lifeAreas.map((area, index) => {
                                    const angle = index * angleStep - Math.PI / 2;
                                    const labelRadius = radius + 30;
                                    const x = centerX + labelRadius * Math.cos(angle);
                                    const y = centerY + labelRadius * Math.sin(angle);
                                    
                                    return (
                                        <text
                                            key={`label-${area.id}`}
                                            x={x}
                                            y={y}
                                            textAnchor="middle"
                                            dominantBaseline="central"
                                            className="text-xs font-medium fill-gray-700"
                                        >
                                            {area.name}
                                        </text>
                                    );
                                })}
                            </svg>
                        </div>
                        
                        <div className="mt-4 grid grid-cols-1 md:grid-cols-2 gap-2 text-sm">
                            {lifeAreas.map(area => (
                                <div key={area.id} className="flex items-center space-x-2">
                                    <div className="w-3 h-3 rounded-full flex-shrink-0" style={{backgroundColor: area.color}}></div>
                                    <span className="text-gray-700 truncate">{area.name}: {area.current}/10</span>
                                </div>
                            ))}
                        </div>
                    </div>
                );
            };

            // –î–µ—Ç–∞–ª—å–Ω—ã–π –≤–∏–¥ —Å—Ñ–µ—Ä—ã
            const AreaDetail = () => {
                if (!selectedArea) return null;

                const areaTasks = tasks.filter(task => task.areaId === selectedArea.id);

                return (
                    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                        <div className="bg-white rounded-xl p-6 w-full max-w-2xl max-h-screen overflow-y-auto fade-in">
                            <div className="flex items-center justify-between mb-6">
                                <h3 className="text-2xl font-semibold" style={{color: selectedArea.color}}>
                                    {selectedArea.name}
                                </h3>
                                <button
                                    onClick={() => setShowAreaDetail(false)}
                                    className="text-gray-400 hover:text-gray-600 p-1"
                                >
                                    ‚úï
                                </button>
                            </div>

                            <div className="mb-6">
                                <div className="flex items-center justify-between mb-2">
                                    <span className="text-sm font-medium text-gray-700">–¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å</span>
                                    <span className="text-lg font-bold">{selectedArea.current}/10</span>
                                </div>
                                <div className="w-full bg-gray-200 rounded-full h-3">
                                    <div
                                        className="h-3 rounded-full transition-all duration-500"
                                        style={{
                                            backgroundColor: selectedArea.color,
                                            width: `${(selectedArea.current / 10) * 100}%`
                                        }}
                                    ></div>
                                </div>
                            </div>

                            {currentUser?.role === 'coach' && (
                                <div className="mb-6">
                                    <label className="block text-sm font-medium text-gray-700 mb-2">
                                        –û–±–Ω–æ–≤–∏—Ç—å –æ—Ü–µ–Ω–∫—É
                                    </label>
                                    <div className="flex flex-wrap gap-2">
                                        {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map(score => (
                                            <button
                                                key={score}
                                                onClick={() => updateAreaScore(selectedArea.id, score)}
                                                className={`w-8 h-8 rounded-full text-sm font-medium transition-colors ${
                                                    score === selectedArea.current
                                                        ? 'text-white'
                                                        : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                                                }`}
                                                style={{
                                                    backgroundColor: score === selectedArea.current ? selectedArea.color : undefined
                                                }}
                                            >
                                                {score}
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            )}

                            <div>
                                <h4 className="text-lg font-semibold mb-4">–ó–∞–¥–∞—á–∏ –≤ —ç—Ç–æ–π —Å—Ñ–µ—Ä–µ</h4>
                                {areaTasks.length === 0 ? (
                                    <p className="text-gray-500 text-center py-8">
                                        –ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–¥–∞—á –≤ —ç—Ç–æ–π —Å—Ñ–µ—Ä–µ
                                    </p>
                                ) : (
                                    <div className="space-y-3">
                                        {areaTasks.map(task => (
                                            <div key={task.id} className="border rounded-lg p-4">
                                                <div className="flex items-start justify-between">
                                                    <div className="flex-1">
                                                        <h5 className="font-medium text-gray-800 mb-1">{task.title}</h5>
                                                        <p className="text-sm text-gray-600 mb-2">{task.description}</p>
                                                        <div className="flex flex-wrap items-center gap-2 text-xs text-gray-500">
                                                            <span className="flex items-center">
                                                                üìÖ {task.plannedDate}
                                                            </span>
                                                            <span className={`px-2 py-1 rounded-full text-xs ${
                                                                task.status === 'completed' 
                                                                    ? 'bg-green-100 text-green-700'
                                                                    : task.status === 'in-progress'
                                                                    ? 'bg-yellow-100 text-yellow-700'
                                                                    : 'bg-gray-100 text-gray-700'
                                                            }`}>
                                                                {task.status === 'completed' ? '‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ' : 
                                                                 task.status === 'in-progress' ? '‚è≥ –í –ø—Ä–æ—Ü–µ—Å—Å–µ' : 'üìã –ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é'}
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <button
                                                        onClick={() => toggleTaskStatus(task.id)}
                                                        className={`p-2 rounded-full transition-colors ${
                                                            task.status === 'completed' 
                                                                ? 'bg-green-100 text-green-600' 
                                                                : 'bg-gray-100 text-gray-400 hover:bg-green-100 hover:text-green-600'
                                                        }`}
                                                    >
                                                        ‚úì
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                );
            };

            // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á
            const TaskList = () => {
                const getTasksByDate = () => {
                    const today = new Date().toISOString().split('T')[0];
                    const tomorrow = new Date(Date.now() + 86400000).toISOString().split('T')[0];
                    
                    return {
                        today: tasks.filter(task => task.plannedDate === today),
                        tomorrow: tasks.filter(task => task.plannedDate === tomorrow),
                        thisWeek: tasks.filter(task => {
                            const taskDate = new Date(task.plannedDate);
                            const weekStart = new Date();
                            const weekEnd = new Date(Date.now() + 7 * 86400000);
                            return taskDate >= weekStart && taskDate <= weekEnd && task.plannedDate !== today && task.plannedDate !== tomorrow;
                        }),
                        later: tasks.filter(task => {
                            const taskDate = new Date(task.plannedDate);
                            const weekEnd = new Date(Date.now() + 7 * 86400000);
                            return taskDate > weekEnd;
                        })
                    };
                };

                const TaskCard = ({ task }) => {
                    const area = lifeAreas.find(a => a.id === task.areaId);
                    
                    return (
                        <div className="bg-white p-4 rounded-lg shadow-md border-l-4 hover:shadow-lg transition-all task-card" 
                             style={{borderLeftColor: area?.color}}>
                            <div className="flex items-start justify-between">
                                <div className="flex-1">
                                    <h4 className="font-medium text-gray-800 mb-1">{task.title}</h4>
                                    <p className="text-sm text-gray-600 mb-2">{task.description}</p>
                                    {task.result && (
                                        <p className="text-sm text-blue-600 mb-2">
                                            üéØ {task.result}
                                        </p>
                                    )}
                                    <div className="flex flex-wrap items-center gap-2 text-xs text-gray-500 mb-2">
                                        <span className="flex items-center">
                                            <div className="w-2 h-2 rounded-full mr-1" style={{backgroundColor: area?.color}}></div>
                                            {area?.name}
                                        </span>
                                        <span className="flex items-center">
                                            üìÖ {task.plannedDate}
                                        </span>
                                    </div>
                                    {(task.reward || task.penalty) && (
                                        <div className="flex flex-wrap gap-2 text-xs">
                                            {task.reward && (
                                                <span className="bg-green-100 text-green-700 px-2 py-1 rounded">
                                                    üéÅ {task.reward}
                                                </span>
                                            )}
                                            {task.penalty && (
                                                <span className="bg-red-100 text-red-700 px-2 py-1 rounded">
                                                    ‚ö†Ô∏è {task.penalty}
                                                </span>
                                            )}
                                        </div>
                                    )}
                                </div>
                                <button
                                    onClick={() => toggleTaskStatus(task.id)}
                                    className={`p-2 rounded-full transition-colors ml-2 ${
                                        task.status === 'completed' 
                                            ? 'bg-green-100 text-green-600' 
                                            : 'bg-gray-100 text-gray-400 hover:bg-green-100 hover:text-green-600'
                                    }`}
                                >
                                    ‚úì
                                </button>
                            </div>
                        </div>
                    );
                };

                const tasksByDate = getTasksByDate();

                return (
                    <div className="space-y-6">
                        {Object.entries(tasksByDate).map(([period, periodTasks]) => {
                            const titles = {
                                today: 'üìÖ –°–µ–≥–æ–¥–Ω—è',
                                tomorrow: '‚è∞ –ó–∞–≤—Ç—Ä–∞', 
                                thisWeek: 'üìù –ù–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ',
                                later: 'üîÆ –ü–æ–∑–∂–µ'
                            };
                            
                            if (periodTasks.length === 0) return null;
                            
                            return (
                                <div key={period} className="fade-in">
                                    <h3 className="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                                        {titles[period]}
                                        <span className="ml-2 bg-gray-200 text-gray-600 text-sm px-2 py-1 rounded-full">
                                            {periodTasks.length}
                                        </span>
                                    </h3>
                                    <div className="space-y-3">
                                        {periodTasks.map(task => (
                                            <TaskCard key={task.id} task={task} />
                                        ))}
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                );
            };

            // –§–æ—Ä–º–∞ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏
            const NewTaskForm = () => (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                    <div className="bg-white rounded-xl p-6 w-full max-w-2xl max-h-screen overflow-y-auto fade-in">
                        <h3 className="text-xl font-semibold mb-4">‚ûï –ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</h3>
                        
                        <div className="space-y-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">–°—Ñ–µ—Ä–∞ –∂–∏–∑–Ω–∏</label>
                                <select
                                    value={newTask.areaId}
                                    onChange={(e) => setNewTask({...newTask, areaId: parseInt(e.target.value)})}
                                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                >
                                    {lifeAreas.map(area => (
                                        <option key={area.id} value={area.id}>{area.name}</option>
                                    ))}
                                </select>
                            </div>
                            
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏</label>
                                <input
                                    type="text"
                                    value={newTask.title}
                                    onChange={(e) => setNewTask({...newTask, title: e.target.value})}
                                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                    placeholder="–û–ø–∏—à–∏—Ç–µ –∑–∞–¥–∞—á—É"
                                />
                            </div>
                            
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                                <textarea
                                    value={newTask.description}
                                    onChange={(e) => setNewTask({...newTask, description: e.target.value})}
                                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                    rows="3"
                                    placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏"
                                />
                            </div>
                            
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç</label>
                                <input
                                    type="text"
                                    value={newTask.result}
                                    onChange={(e) => setNewTask({...newTask, result: e.target.value})}
                                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                    placeholder="–ö–∞–∫–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç"
                                />
                            </div>
                            
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">üéÅ –í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ</label>
                                    <input
                                        type="text"
                                        value={newTask.reward}
                                        onChange={(e) => setNewTask({...newTask, reward: e.target.value})}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                        placeholder="–ó–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ"
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">‚ö†Ô∏è –®—Ç—Ä–∞—Ñ</label>
                                    <input
                                        type="text"
                                        value={newTask.penalty}
                                        onChange={(e) => setNewTask({...newTask, penalty: e.target.value})}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                        placeholder="–ó–∞ –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ"
                                    />
                                </div>
                            </div>
                            
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">üìÖ –ü–ª–∞–Ω–∏—Ä—É–µ–º–∞—è –¥–∞—Ç–∞</label>
                                <input
                                    type="date"
                                    value={newTask.plannedDate}
                                    onChange={(e) => setNewTask({...newTask, plannedDate: e.target.value})}
                                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                />
                            </div>
                            
                            <div className="flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-3 pt-4">
                                <button
                                    onClick={createTask}
                                    disabled={loading}
                                    className="flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50"
                                >
                                    {loading ? <LoadingSpinner /> : '–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É'}
                                </button>
                                <button
                                    onClick={() => setShowNewTaskForm(false)}
                                    className="flex-1 bg-gray-200 text-gray-800 py-3 rounded-lg hover:bg-gray-300 transition-colors"
                                >
                                    –û—Ç–º–µ–Ω–∞
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );

            // –ì–ª–∞–≤–Ω—ã–π –¥–∞—à–±–æ—Ä–¥
            const Dashboard = () => {
                const completedTasks = tasks.filter(task => task.status === 'completed').length;
                const totalTasks = tasks.length;
                const averageScore = lifeAreas.length > 0 ? Math.round(lifeAreas.reduce((sum, area) => sum + area.current, 0) / lifeAreas.length) : 0;
                const todayTasks = tasks.filter(task => task.plannedDate === new Date().toISOString().split('T')[0]);

                return (
                    <div className="min-h-screen bg-gray-50">
                        {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */}
                        <header className="bg-white shadow-sm border-b sticky top-0 z-40">
                            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                                <div className="flex justify-between items-center py-4">
                                    <div className="flex items-center space-x-4">
                                        <h1 className="text-xl md:text-2xl font-bold text-gray-900">üê¶ –í–æ—Ä–æ–±–µ–π</h1>
                                        <span className="text-sm text-gray-500 hidden md:inline">
                                            –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {currentUser.name}
                                        </span>
                                    </div>
                                    
                                    <nav className="flex items-center space-x-2">
                                        <button
                                            onClick={() => setCurrentView('dashboard')}
                                            className={`px-3 py-2 rounded-lg transition-colors flex items-center space-x-1 ${
                                                currentView === 'dashboard' 
                                                    ? 'bg-blue-100 text-blue-700' 
                                                    : 'text-gray-600 hover:text-gray-900'
                                            }`}
                                        >
                                            üè†
                                            <span className="hidden sm:inline ml-1">–ì–ª–∞–≤–Ω–∞—è</span>
                                        </button>
                                        <button
                                            onClick={() => setCurrentView('tasks')}
                                            className={`px-3 py-2 rounded-lg transition-colors flex items-center space-x-1 ${
                                                currentView === 'tasks' 
                                                    ? 'bg-blue-100 text-blue-700' 
                                                    : 'text-gray-600 hover:text-gray-900'
                                            }`}
                                        >
                                            ‚úÖ
                                            <span className="hidden sm:inline ml-1">–ó–∞–¥–∞—á–∏</span>
                                        </button>
                                        <button
                                            onClick={handleLogout}
                                            className="text-gray-600 hover:text-gray-900 px-3 py-2"
                                        >
                                            üö™
                                        </button>
                                    </nav>
                                </div>
                            </div>
                        </header>

                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 md:py-8 mobile-padding">
                            {currentView === 'dashboard' && (
                                <div className="grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-8">
                                    {/* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */}
                                    <div className="lg:col-span-3 grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 mb-6 md:mb-8">
                                        <div className="bg-white p-4 md:p-6 rounded-xl shadow-lg fade-in">
                                            <div className="flex items-center justify-between">
                                                <div>
                                                    <p className="text-sm font-medium text-gray-600">–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª</p>
                                                    <p className="text-2xl md:text-3xl font-bold text-gray-900">{averageScore}/10</p>
                                                    <p className="text-xs text-gray-500 mt-1">–ü–æ –≤—Å–µ–º —Å—Ñ–µ—Ä–∞–º –∂–∏–∑–Ω–∏</p>
                                                </div>
                                                <div className="bg-blue-100 p-3 rounded-full">
                                                    üìä
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="bg-white p-4 md:p-6 rounded-xl shadow-lg fade-in">
                                            <div className="flex items-center justify-between">
                                                <div>
                                                    <p className="text-sm font-medium text-gray-600">–í—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞–¥–∞—á</p>
                                                    <p className="text-2xl md:text-3xl font-bold text-gray-900">{completedTasks}/{totalTasks}</p>
                                                    <p className="text-xs text-gray-500 mt-1">–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å</p>
                                                </div>
                                                <div className="bg-green-100 p-3 rounded-full">
                                                    ‚úÖ
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="bg-white p-4 md:p-6 rounded-xl shadow-lg fade-in">
                                            <div className="flex items-center justify-between">
                                                <div>
                                                    <p className="text-sm font-medium text-gray-600">–ü—Ä–æ–≥—Ä–µ—Å—Å –Ω–µ–¥–µ–ª–∏</p>
                                                    <p className="text-2xl md:text-3xl font-bold text-gray-900">{totalTasks > 0 ? Math.round((completedTasks/totalTasks)*100) : 0}%</p>
                                                    <p className="text-xs text-gray-500 mt-1">–ó–∞–≤–µ—Ä—à–µ–Ω–Ω–æ—Å—Ç—å</p>
                                                </div>
                                                <div className="bg-purple-100 p-3 rounded-full">
                                                    üìà
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    {/* –ö–æ–ª–µ—Å–æ –±–∞–ª–∞–Ω—Å–∞ */}
                                    <div className="lg:col-span-2 fade-in">
                                        <LifeWheel />
                                    </div>

                                    {/* –¢–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏ */}
                                    <div className="space-y-4 md:space-y-6 fade-in">
                                        <div className="bg-white p-4 md:p-6 rounded-xl shadow-lg">
                                            <div className="flex items-center justify-between mb-4">
                                                <h3 className="text-lg md:text-xl font-semibold">üìÖ –ó–∞–¥–∞—á–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</h3>
                                                {currentUser?.role === 'coach' && (
                                                    <button
                                                        onClick={() => setShowNewTaskForm(true)}
                                                        className="bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 transition-colors"
                                                    >
                                                        ‚ûï
                                                    </button>
                                                )}
                                            </div>
                                            
                                            <div className="space-y-3">
                                                {todayTasks.length === 0 ? (
                                                    <p className="text-gray-500 text-center py-4 mobile-text">
                                                        –ù–∞ —Å–µ–≥–æ–¥–Ω—è –∑–∞–¥–∞—á –Ω–µ—Ç üéâ
                                                    </p>
                                                ) : (
                                                    todayTasks.slice(0, 3).map(task => {
                                                        const area = lifeAreas.find(a => a.id === task.areaId);
                                                        return (
                                                            <div key={task.id} className="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg">
                                                                <button
                                                                    onClick={() => toggleTaskStatus(task.id)}
                                                                    className={`p-1 rounded-full ${
                                                                        task.status === 'completed' 
                                                                            ? 'text-green-600' 
                                                                            : 'text-gray-400'
                                                                    }`}
                                                                >
                                                                    ‚úì
                                                                </button>
                                                                <div className="flex-1">
                                                                    <p className="font-medium text-gray-800 mobile-text">{task.title}</p>
                                                                    <p className="text-sm text-gray-600">{area?.name}</p>
                                                                </div>
                                                            </div>
                                                        );
                                                    })
                                                )}
                                            </div>
                                            
                                            <button
                                                onClick={() => setCurrentView('tasks')}
                                                className="w-full mt-4 text-blue-600 hover:text-blue-700 text-sm font-medium"
                                            >
                                                –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏ ‚Üí
                                            </button>
                                        </div>

                                        {/* –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è */}
                                        <div className="bg-white p-4 md:p-6 rounded-xl shadow-lg">
                                            <h3 className="text-lg md:text-xl font-semibold mb-4">‚ö° –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                                            <div className="space-y-3">
                                                {currentUser?.role === 'coach' ? (
                                                    <>
                                                        <button
                                                            onClick={() => setShowNewTaskForm(true)}
                                                            className="w-full bg-blue-50 text-blue-700 p-3 rounded-lg hover:bg-blue-100 transition-colors flex items-center space-x-2"
                                                        >
                                                            <span>‚ûï</span>
                                                            <span>–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</span>
                                                        </button>
                                                        <button
                                                            onClick={() => setCurrentView('tasks')}
                                                            className="w-full bg-green-50 text-green-700 p-3 rounded-lg hover:bg-green-100 transition-colors flex items-center space-x-2"
                                                        >
                                                            <span>üìä</span>
                                                            <span>–ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</span>
                                                        </button>
                                                    </>
                                                ) : (
                                                    <>
                                                        <button
                                                            onClick={() => setCurrentView('tasks')}
                                                            className="w-full bg-blue-50 text-blue-700 p-3 rounded-lg hover:bg-blue-100 transition-colors flex items-center space-x-2"
                                                        >
                                                            <span>‚úÖ</span>
                                                            <span>–ú–æ–∏ –∑–∞–¥–∞—á–∏</span>
                                                        </button>
                                                        <div className="text-sm text-gray-600 p-3 bg-gray-50 rounded-lg mobile-text">
                                                            üí° –û—Ç–º–µ—á–∞–π—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
                                                        </div>
                                                    </>
                                                )}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {currentView === 'tasks' && (
                                <div className="fade-in">
                                    <div className="flex flex-col md:flex-row md:items-center justify-between mb-6 space-y-4 md:space-y-0">
                                        <h2 className="text-xl md:text-2xl font-bold text-gray-900">üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏</h2>
                                        {currentUser?.role === 'coach' && (
                                            <button
                                                onClick={() => setShowNewTaskForm(true)}
                                                className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2"
                                            >
                                                <span>‚ûï</span>
                                                <span>–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</span>
                                            </button>
                                        )}
                                    </div>
                                    <TaskList />
                                </div>
                            )}
                        </div>

                        {showNewTaskForm && <NewTaskForm />}
                        {showAreaDetail && <AreaDetail />}
                        <NotificationComponent />
                    </div>
                );
            };

            // –ì–ª–∞–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä
            if (loading && !currentUser) {
                return (
                    <div className="min-h-screen bg-gray-50 flex items-center justify-center">
                        <LoadingSpinner />
                    </div>
                );
            }

            if (!currentUser) {
                return <LoginForm />;
            }

            return <Dashboard />;
        };

        // PWA —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
        let deferredPrompt;

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            const installPrompt = document.getElementById('install-prompt');
            if (installPrompt) {
                installPrompt.style.display = 'block';
            }
        });

        document.getElementById('install-btn')?.addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                deferredPrompt = null;
                document.getElementById('install-prompt').style.display = 'none';
            }
        });

        document.getElementById('dismiss-btn')?.addEventListener('click', () => {
            document.getElementById('install-prompt').style.display = 'none';
        });

        // Service Worker –¥–ª—è PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                const swCode = `
                    const CACHE_NAME = 'vorobey-v1';
                    const urlsToCache = [
                        '/',
                        '/manifest.json'
                    ];

                    self.addEventListener('install', (event) => {
                        event.waitUntil(
                            caches.open(CACHE_NAME)
                                .then((cache) => cache.addAll(urlsToCache))
                        );
                    });

                    self.addEventListener('fetch', (event) => {
                        event.respondWith(
                            caches.match(event.request)
                                .then((response) => {
                                    if (response) {
                                        return response;
                                    }
                                    return fetch(event.request);
                                })
                        );
                    });
                `;
                
                const blob = new Blob([swCode], { type: 'application/javascript' });
                const swUrl = URL.createObjectURL(blob);
                
                navigator.serviceWorker.register(swUrl)
                    .then(() => console.log('SW registered'))
                    .catch(() => console.log('SW registration failed'));
            });
        }

        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        const root = createRoot(document.getElementById('root'));
        root.render(React.createElement(CoachingApp));
    </script>
</body>
</html>